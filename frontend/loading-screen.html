<!-- Modern Loading Screen with Advanced Animations -->
<div id="loading-screen" class="fixed inset-0 bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 z-50 flex items-center justify-center overflow-hidden">
  
  <!-- Background Animation -->
  <div class="absolute inset-0">
    <!-- Floating particles -->
    <div class="absolute top-20 left-20 w-2 h-2 bg-blue-300 rounded-full animate-float opacity-60"></div>
    <div class="absolute top-40 right-32 w-3 h-3 bg-blue-200 rounded-full animate-float opacity-40" style="animation-delay: -1s;"></div>
    <div class="absolute bottom-32 left-1/4 w-2 h-2 bg-blue-400 rounded-full animate-float opacity-50" style="animation-delay: -2s;"></div>
    <div class="absolute bottom-20 right-20 w-4 h-4 bg-blue-100 rounded-full animate-float opacity-30" style="animation-delay: -0.5s;"></div>
    <div class="absolute top-1/2 left-10 w-2 h-2 bg-blue-300 rounded-full animate-float opacity-70" style="animation-delay: -1.5s;"></div>
    <div class="absolute top-1/3 right-10 w-3 h-3 bg-blue-200 rounded-full animate-float opacity-45" style="animation-delay: -2.5s;"></div>
    
    <!-- Grid overlay -->
    <div class="absolute inset-0 opacity-5">
      <div style="background-image: radial-gradient(circle, #ffffff 1px, transparent 1px); background-size: 40px 40px; width: 100%; height: 100%;"></div>
    </div>
  </div>

  <!-- Main Loading Content -->
  <div class="relative z-10 text-center">
    
    <!-- Logo Animation Container -->
    <div class="mb-8">
      <div class="relative">
        <!-- Outer rotating ring -->
        <div class="w-24 h-24 border-4 border-blue-200 border-t-transparent rounded-full animate-spin mx-auto"></div>
        
        <!-- Inner pulsing circle -->
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full animate-pulse flex items-center justify-center shadow-2xl">
            <!-- Logo Icon -->
            <svg class="w-8 h-8 text-white animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="animation-delay: 0.5s;">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
            </svg>
          </div>
        </div>
        
        <!-- Ripple effect -->
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="w-32 h-32 border border-blue-300 rounded-full animate-ping opacity-20"></div>
        </div>
      </div>
    </div>

    <!-- Title with typewriter effect -->
    <div class="mb-6">
      <h1 class="text-3xl font-bold text-white mb-2 animate-fade-in" id="loading-title">ระบบสมุดพก</h1>
      <p class="text-blue-200 animate-fade-in" style="animation-delay: 0.5s;" id="loading-subtitle">Smart Port Management System</p>
    </div>

    <!-- Modern Progress Bar -->
    <div class="w-80 max-w-sm mx-auto mb-6">
      <div class="relative">
        <!-- Progress bar container -->
        <div class="h-2 bg-blue-800 rounded-full overflow-hidden shadow-inner">
          <!-- Animated progress fill -->
          <div class="h-full bg-gradient-to-r from-blue-400 via-blue-300 to-blue-400 rounded-full animate-progress" id="progress-bar"></div>
        </div>
        <!-- Progress percentage -->
        <div class="text-center mt-2">
          <span class="text-blue-200 text-sm" id="progress-text">0%</span>
        </div>
      </div>
    </div>

    <!-- Loading Messages -->
    <div class="min-h-6">
      <p class="text-blue-300 text-sm animate-pulse" id="loading-message">กำลังเริ่มต้นระบบ...</p>
    </div>

    <!-- Loading dots animation -->
    <div class="flex justify-center space-x-1 mt-4">
      <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce"></div>
      <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
      <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
      <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0.3s;"></div>
    </div>
  </div>

  <!-- CSS Animations -->
  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0px) translateX(0px); }
      25% { transform: translateY(-10px) translateX(5px); }
      50% { transform: translateY(-20px) translateX(-5px); }
      75% { transform: translateY(-10px) translateX(3px); }
    }
    
    @keyframes progress {
      0% { width: 0%; }
      100% { width: 100%; }
    }
    
    @keyframes fade-in {
      0% { 
        opacity: 0; 
        transform: translateY(20px); 
      }
      100% { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }
    
    .animate-float {
      animation: float 4s ease-in-out infinite;
    }
    
    .animate-progress {
      animation: progress 3s ease-in-out forwards;
    }
    
    .animate-fade-in {
      animation: fade-in 1s ease-out forwards;
    }
    
    /* Responsive adjustments */
    @media (max-width: 640px) {
      .w-80 { width: 16rem; }
    }
  </style>
</div>

<script>
// Enhanced Loading Manager
class ModernLoadingManager {
  constructor() {
    this.currentProgress = 0
    this.targetProgress = 0
    this.messages = [
      'กำลังเริ่มต้นระบบ...',
      'กำลังโหลดข้อมูลผู้ใช้...',
      'กำลังเชื่อมต่อฐานข้อมูล...',
      'กำลังตรวจสอบสิทธิ์การเข้าถึง...',
      'กำลังเตรียมระบบให้พร้อมใช้งาน...',
      'เกือบเสร็จแล้ว...'
    ]
    this.currentMessageIndex = 0
    this.init()
  }

  init() {
    this.progressBar = document.getElementById('progress-bar')
    this.progressText = document.getElementById('progress-text')
    this.loadingMessage = document.getElementById('loading-message')
    
    this.startLoading()
  }

  startLoading() {
    // Simulate loading progress
    const progressInterval = setInterval(() => {
      this.targetProgress += Math.random() * 15 + 5
      
      if (this.targetProgress >= 100) {
        this.targetProgress = 100
        clearInterval(progressInterval)
        
        setTimeout(() => {
          this.completeLoading()
        }, 500)
      }
      
      this.updateProgress()
      this.updateMessage()
    }, 400 + Math.random() * 600) // Random interval for realistic feel
  }

  updateProgress() {
    // Smooth progress animation
    const progressStep = () => {
      if (this.currentProgress < this.targetProgress) {
        this.currentProgress += 2
        if (this.currentProgress > this.targetProgress) {
          this.currentProgress = this.targetProgress
        }
        
        if (this.progressBar) {
          this.progressBar.style.width = this.currentProgress + '%'
        }
        if (this.progressText) {
          this.progressText.textContent = Math.round(this.currentProgress) + '%'
        }
        
        requestAnimationFrame(progressStep)
      }
    }
    
    requestAnimationFrame(progressStep)
  }

  updateMessage() {
    if (this.targetProgress > (this.currentMessageIndex + 1) * 16.66) {
      this.currentMessageIndex++
      if (this.currentMessageIndex < this.messages.length && this.loadingMessage) {
        // Fade out
        this.loadingMessage.style.opacity = '0'
        
        setTimeout(() => {
          this.loadingMessage.textContent = this.messages[this.currentMessageIndex]
          this.loadingMessage.style.opacity = '1'
        }, 200)
      }
    }
  }

  completeLoading() {
    const loadingScreen = document.getElementById('loading-screen')
    if (loadingScreen) {
      // Add completion animation
      loadingScreen.style.transform = 'scale(0.95)'
      loadingScreen.style.opacity = '0'
      loadingScreen.style.transition = 'all 0.5s ease-in-out'
      
      setTimeout(() => {
        loadingScreen.classList.add('hidden')
        loadingScreen.style.transform = ''
        loadingScreen.style.opacity = ''
        loadingScreen.style.transition = ''
      }, 500)
    }
  }

  // Method to show loading manually
  show() {
    const loadingScreen = document.getElementById('loading-screen')
    if (loadingScreen) {
      loadingScreen.classList.remove('hidden')
      this.currentProgress = 0
      this.targetProgress = 0
      this.currentMessageIndex = 0
      this.startLoading()
    }
  }

  // Method to hide loading manually
  hide() {
    this.targetProgress = 100
    setTimeout(() => {
      this.completeLoading()
    }, 300)
  }
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    window.modernLoading = new ModernLoadingManager()
  })
} else {
  window.modernLoading = new ModernLoadingManager()
}
</script>